<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Itinerario completo de 8 días en Tokyo, Japón - 22 febrero al 1 marzo 2025. Mapa interactivo con recorridos optimizados por zonas.">
    <meta name="keywords" content="Tokyo, Japón, itinerario, viaje, mapa interactivo, turismo">
    <meta name="author" content="Itinerario Japón 2025">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Itinerario Tokyo 8 días - Japón 2025">
    <meta property="og:description" content="Mapa interactivo del itinerario optimizado por zonas en Tokyo">
    <meta property="og:url" content="https://tudominio.com/">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Itinerario Tokyo 8 días - Japón 2025">
    <meta name="twitter:description" content="Mapa interactivo del itinerario optimizado por zonas en Tokyo">

    <title>Mapa Itinerario Tokyo 8 días - Japón 2025</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/leaflet/leaflet.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
    <div class="container">
        <nav class="top-nav" aria-label="Navegación principal">
            <a href="index.html">Tokyo</a>
            <a href="nagoya.html">Nagoya</a>
            <a href="takayama.html">Takayama</a>
            <a href="kyoto.html">Kyoto</a>
            <a href="osaka.html">Osaka</a>
            <a href="tamano-naoshima.html">Tamano / Naoshima</a>
            <a href="hakone.html">Hakone</a>
        </nav>
        <header class="header" role="banner">
            <h1>Mapa Itinerario Tokyo - 8 días</h1>
            <p>22 febrero - 1 marzo 2025 | Recorrido optimizado por zonas</p>
        </header>

        <main id="main-content" class="map-card" role="main">
            <div id="map" aria-label="Mapa interactivo del itinerario"></div>
            <div class="map-note">
                Marcadores por dia, rutas sugeridas y enlace directo a Google Maps en cada popup.
            </div>

            <div class="legend">
                <h3>Leyenda y resumen por dia</h3>
                <div id="legend-grid" class="legend-grid"></div>

                <div class="hotel-badge" id="hotel-badge"></div>

                <div class="optimization-box">
                    <h4>Analisis rapido de optimizacion geografica</h4>
                    <div id="optimization-grid" class="optimization-grid"></div>
                </div>

                <div class="instructions">
                    <h4>Como usar este mapa</h4>
                    <p>
                        - Click en cada marcador para ver detalles y abrir el punto en Google Maps.<br>
                        - Usa zoom + / - o scroll para acercar; arrastra para moverte por la ciudad.<br>
                        - Cada color representa un dia del itinerario; las lineas punteadas son rutas sugeridas.<br>
                        - El marcador dorado es el hotel base (Akasaka).<br>
                        - Si prefieres Google Maps completo: abre cualquier popup y haz click en "Abrir en Google Maps".
                    </p>
                </div>
            </div>
        </main>
    </div>

    <script src="assets/leaflet/leaflet.js"></script>
    <script>
        const days = [
            {
                name: 'Dia 1 (Sab 22) - Ginza + Planets',
                color: '#e74c3c',
                summary: 'Tsukiji, TeamLab Planets, Ginza, Nissan Crossing',
                stops: [
                    { name: 'Tsukiji Outer Market', lat: 35.6655, lng: 139.7708, note: 'Street food y mercado' },
                    { name: 'TeamLab Planets', lat: 35.6407, lng: 139.79, note: 'Arte inmersivo' },
                    { name: 'Ginza', lat: 35.6717, lng: 139.765, note: 'Paseo principal' },
                    { name: 'Nissan Crossing', lat: 35.6719, lng: 139.7647, note: 'Showroom futurista' }
                ]
            },
            {
                name: 'Dia 2 (Dom 23) - Borderless + Tower',
                color: '#9b59b6',
                summary: 'TeamLab Borderless, Tokyo Tower, Zojoji',
                stops: [
                    { name: 'TeamLab Borderless (Azabudai Hills)', lat: 35.6641, lng: 139.7414, note: 'Museo digital' },
                    { name: 'Tokyo Tower', lat: 35.6586, lng: 139.7454, note: 'Mirador iconico' },
                    { name: 'Templo Zojoji', lat: 35.6585, lng: 139.7484, note: 'Templo historico' }
                ]
            },
            {
                name: 'Dia 3 (Lun 24) - Noreste',
                color: '#3498db',
                summary: 'Asakusa, Ueno, Akihabara',
                stops: [
                    { name: 'Senso-ji (Asakusa)', lat: 35.7148, lng: 139.7967, note: 'Templo y Nakamise' },
                    { name: 'Parque Ueno', lat: 35.7148, lng: 139.7731, note: 'Museos y estanque' },
                    { name: 'Akihabara', lat: 35.6984, lng: 139.773, note: 'Tiendas y arcades' }
                ]
            },
            {
                name: 'Dia 4 (Mar 25) - Shibuya / Harajuku',
                color: '#e67e22',
                summary: 'Meiji, Harajuku, Omotesando, Shibuya',
                stops: [
                    { name: 'Santuario Meiji', lat: 35.6764, lng: 139.6993, note: 'Bosque urbano' },
                    { name: 'Harajuku', lat: 35.6702, lng: 139.702, note: 'Takeshita St.' },
                    { name: 'Omotesando', lat: 35.6648, lng: 139.7126, note: 'Arquitectura y cafes' },
                    { name: 'Shibuya Crossing', lat: 35.6595, lng: 139.7005, note: 'Cruce iconico' }
                ]
            },
            {
                name: 'Dia 5 (Mie 26) - Museos + Base',
                color: '#16a085',
                summary: 'Palacio, NACT, 21_21, Hie, Hikawa',
                stops: [
                    { name: 'Jardines Palacio Imperial', lat: 35.6852, lng: 139.7528, note: 'Campos verdes' },
                    { name: 'National Art Center Tokyo', lat: 35.6655, lng: 139.7264, note: 'Museo y arquitectura' },
                    { name: '21_21 Design Sight', lat: 35.6668, lng: 139.7276, note: 'Diseno y exhibiciones' },
                    { name: 'Santuario Hie', lat: 35.672, lng: 139.7382, note: 'Torii rojos' },
                    { name: 'Santuario Hikawa (Akasaka)', lat: 35.6726, lng: 139.7372, note: 'Spot tranquilo' }
                ]
            },
            {
                name: 'Dia 6 (Jue 27) - Norte literario',
                color: '#8e44ad',
                summary: 'Koishikawa, Kagurazaka, Jinbocho',
                stops: [
                    { name: 'Koishikawa Korakuen', lat: 35.7077, lng: 139.7519, note: 'Jardin clasico' },
                    { name: 'Kagurazaka', lat: 35.7022, lng: 139.7375, note: 'Calles con escalones' },
                    { name: 'Jinbocho', lat: 35.6959, lng: 139.7573, note: 'Librerias y cafes' }
                ]
            },
            {
                name: 'Dia 7 (Vie 28) - Shinjuku',
                color: '#f39c12',
                summary: 'Shinjuku Gyoen, ciudad, Golden Gai',
                stops: [
                    { name: 'Shinjuku Gyoen', lat: 35.6852, lng: 139.71, note: 'Parque mixto' },
                    { name: 'Shinjuku (Omoide Yokocho)', lat: 35.6938, lng: 139.7036, note: 'Callejones y ramen' },
                    { name: 'Golden Gai', lat: 35.693, lng: 139.7064, note: 'Bares tiny' }
                ]
            },
            {
                name: 'Dia 8 (Sab 1) - Sur trendy',
                color: '#27ae60',
                summary: 'Institute, Ebisu, Daikanyama, Nakameguro',
                stops: [
                    { name: 'Teien Art Museum (Institute)', lat: 35.6362, lng: 139.7144, note: 'Arte y jardines' },
                    { name: 'Ebisu', lat: 35.6471, lng: 139.7101, note: 'Yebisu Garden Place' },
                    { name: 'Daikanyama', lat: 35.6482, lng: 139.7024, note: 'T-Site y cafes' },
                    { name: 'Nakameguro', lat: 35.6487, lng: 139.6993, note: 'Canal y boutiques' }
                ]
            }
        ];

        const hotel = {
            name: 'Hotel base: Via Inn Prime Akasaka',
            lat: 35.6729,
            lng: 139.7357,
            note: '6 lineas de metro en 10 min | Ubicacion estrategica'
        };

        const map = L.map('map', {
            scrollWheelZoom: true,
            worldCopyJump: true
        });

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap'
        }).addTo(map);

        const bounds = [];

        const legendGrid = document.getElementById('legend-grid');
        const optimizationGrid = document.getElementById('optimization-grid');
        const hotelBadge = document.getElementById('hotel-badge');

        days.forEach((day, index) => {
            const latlngs = day.stops.map((s) => [s.lat, s.lng]);
            if (latlngs.length > 1) {
                L.polyline(latlngs, {
                    color: day.color,
                    weight: 3,
                    opacity: 0.55,
                    dashArray: '6 4'
                }).addTo(map);
            }

            day.stops.forEach((stop) => {
                const marker = L.circleMarker([stop.lat, stop.lng], {
                    radius: 9,
                    color: '#fff',
                    weight: 2,
                    fillColor: day.color,
                    fillOpacity: 0.95
                });

                marker.bindPopup(`
                    <strong>${stop.name}</strong><br>
                    ${day.name}<br>
                    ${stop.note || ''}<br>
                    <a href="https://www.google.com/maps/search/?api=1&query=${stop.lat},${stop.lng}" target="_blank" rel="noopener">Abrir en Google Maps</a>
                `);
                marker.addTo(map);
                bounds.push([stop.lat, stop.lng]);
            });

            const item = document.createElement('div');
            item.className = 'legend-item';
            item.style.borderColor = day.color;
            item.style.setProperty('--delay', `${index * 70}ms`);
            item.innerHTML = `
                <div class="legend-icon" style="background:${day.color};"></div>
                <div class="legend-text">
                    <strong>${day.name}</strong>
                    <small>${day.summary}</small>
                </div>
            `;
            legendGrid.appendChild(item);

            const opt = document.createElement('div');
            opt.className = 'opt-item';
            opt.style.setProperty('--delay', `${index * 70}ms`);
            opt.innerHTML = `<strong>${day.name}</strong>${day.summary}`;
            optimizationGrid.appendChild(opt);
        });

        L.marker([hotel.lat, hotel.lng], {
            icon: L.divIcon({
                className: 'hotel-icon',
                html: '<div class="hotel-pin">&#9733;</div>',
                iconSize: [26, 26],
                iconAnchor: [13, 26],
                popupAnchor: [0, -20]
            })
        }).addTo(map)
          .bindPopup(`<strong>${hotel.name}</strong><br>${hotel.note}<br><a href="https://www.google.com/maps/search/?api=1&query=${hotel.lat},${hotel.lng}" target="_blank" rel="noopener">Abrir en Google Maps</a>`);

        hotelBadge.textContent = `${hotel.name} - ${hotel.note}`;

        if (bounds.length) {
            map.fitBounds(bounds, { padding: [32, 32] });
        } else {
            map.setView([35.6762, 139.6503], 12);
        }
    </script>
    <script src="assets/js/navigation.js"></script>
</body>
</html>


