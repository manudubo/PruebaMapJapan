<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Itinerario Tokyo 8 dias</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/leaflet/leaflet.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .header {
            background: linear-gradient(135deg, rgba(15, 108, 207, 0.95) 0%, rgba(9, 71, 150, 0.96) 100%);
            color: #f9fbff;
            padding: 28px 32px;
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            box-shadow: var(--shadow);
            text-align: center;
            animation: fadeUp 520ms ease both;
        }
        .header h1 { font-size: clamp(24px, 2.6vw, 34px); letter-spacing: -0.02em; }
        .header p { margin-top: 8px; opacity: 0.9; font-size: 15px; }

        .map-card {
            background: var(--surface);
            border-radius: 0 0 var(--radius-lg) var(--radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid var(--line);
            backdrop-filter: blur(14px);
            animation: fadeUp 520ms ease 120ms both;
        }
        #map {
            width: 100%;
            min-height: 540px;
        }
        .legend {
            padding: 28px;
        }
        .legend h3 {
            text-align: center;
            color: var(--accent-strong);
            font-size: clamp(18px, 2vw, 22px);
            margin-bottom: 18px;
        }
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 14px;
            margin-bottom: 18px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            padding: 12px 14px;
            background: var(--surface-strong);
            border-radius: var(--radius-sm);
            border: 1px solid rgba(15, 108, 207, 0.12);
            box-shadow: 0 8px 18px rgba(15, 24, 32, 0.06);
            animation: fadeUp 480ms ease var(--delay, 0ms) both;
        }
        .legend-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 12px;
            border: 2px solid rgba(0,0,0,0.12);
            flex-shrink: 0;
        }
        .legend-text strong { display: block; font-size: 14px; color: #101820; }
        .legend-text small { color: var(--muted); font-size: 12px; }

        .hotel-badge {
            background: linear-gradient(135deg, #fbe7a6 0%, #f6c35c 100%);
            color: #513200;
            padding: 14px 16px;
            border-radius: var(--radius-md);
            text-align: center;
            font-weight: 700;
            border: 1px solid rgba(240, 185, 58, 0.6);
            box-shadow: 0 10px 20px rgba(240, 185, 58, 0.24);
            margin-top: 10px;
            animation: fadeUp 500ms ease 200ms both;
        }

        .optimization-box {
            background: linear-gradient(135deg, #e8f6ef 0%, #d7efe5 100%);
            padding: 20px;
            border-radius: var(--radius-md);
            border: 1px solid rgba(46, 139, 87, 0.2);
            margin-top: 22px;
            animation: fadeUp 520ms ease 220ms both;
        }
        .optimization-box h4 { color: #1f6a3f; margin-bottom: 12px; font-size: 16px; }
        .optimization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 10px;
        }
        .opt-item {
            background: var(--surface-strong);
            padding: 12px 14px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            line-height: 1.5;
            box-shadow: 0 8px 16px rgba(0,0,0,0.06);
            animation: fadeUp 480ms ease var(--delay, 0ms) both;
        }
        .opt-item strong { display: block; color: var(--accent-strong); margin-bottom: 4px; }

        .instructions {
            background: #fff6e7;
            padding: 18px;
            border-radius: var(--radius-md);
            border: 1px solid rgba(255, 152, 0, 0.35);
            margin-top: 18px;
            color: #5f4200;
            animation: fadeUp 520ms ease 260ms both;
        }
        .instructions h4 { margin-bottom: 8px; color: #e06a00; }
        .instructions p { font-size: 14px; line-height: 1.6; }

        .map-note {
            padding: 14px 20px;
            background: #edf3ff;
            color: #1f3461;
            font-size: 14px;
            border-left: 4px solid var(--accent);
        }
        .hotel-pin {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: #f7c948;
            color: #1f2733;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 800;
            border: 2px solid #b98500;
            box-shadow: 0 0 0 3px rgba(247,201,72,0.3);
        }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @media (prefers-reduced-motion: reduce) {
            .header,
            .map-card,
            .legend-item,
            .opt-item,
            .hotel-badge,
            .optimization-box,
            .instructions {
                animation: none;
            }
        }
        @media (max-width: 768px) {
            .header h1 { font-size: 22px; }
            .legend-grid, .optimization-grid { grid-template-columns: 1fr; }
            #map { min-height: 420px; }
        }
    </style>
</head>
<body>
    <div class="container">
                <nav class="top-nav">
            <a href="index.html">Tokyo</a>
            <a href="nagoya.html">Nagoya</a>
            <a href="takayama.html">Takayama</a>
            <a href="kyoto.html">Kyoto</a>
            <a href="osaka.html">Osaka</a>
            <a href="tamano-naoshima.html">Tamano / Naoshima</a>
            <a href="hakone.html">Hakone</a>
        </nav>
        <div class="header">
            <h1>Mapa Itinerario Tokyo - 8 dias</h1>
            <p>22 febrero - 1 marzo 2025 | Recorrido optimizado por zonas</p>
        </div>

        <div class="map-card">
            <div id="map" aria-label="Mapa interactivo del itinerario"></div>
            <div class="map-note">
                Marcadores por dia, rutas sugeridas y enlace directo a Google Maps en cada popup.
            </div>

            <div class="legend">
                <h3>Leyenda y resumen por dia</h3>
                <div id="legend-grid" class="legend-grid"></div>

                <div class="hotel-badge" id="hotel-badge"></div>

                <div class="optimization-box">
                    <h4>Analisis rapido de optimizacion geografica</h4>
                    <div id="optimization-grid" class="optimization-grid"></div>
                </div>

                <div class="instructions">
                    <h4>Como usar este mapa</h4>
                    <p>
                        - Click en cada marcador para ver detalles y abrir el punto en Google Maps.<br>
                        - Usa zoom + / - o scroll para acercar; arrastra para moverte por la ciudad.<br>
                        - Cada color representa un dia del itinerario; las lineas punteadas son rutas sugeridas.<br>
                        - El marcador dorado es el hotel base (Akasaka).<br>
                        - Si prefieres Google Maps completo: abre cualquier popup y haz click en "Abrir en Google Maps".
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/leaflet/leaflet.js"></script>
    <script>
        const days = [
            {
                name: 'Dia 1 (Sab 22) - Ginza + Planets',
                color: '#e74c3c',
                summary: 'Tsukiji, TeamLab Planets, Ginza, Nissan Crossing',
                stops: [
                    { name: 'Tsukiji Outer Market', lat: 35.6655, lng: 139.7708, note: 'Street food y mercado' },
                    { name: 'TeamLab Planets', lat: 35.6407, lng: 139.79, note: 'Arte inmersivo' },
                    { name: 'Ginza', lat: 35.6717, lng: 139.765, note: 'Paseo principal' },
                    { name: 'Nissan Crossing', lat: 35.6719, lng: 139.7647, note: 'Showroom futurista' }
                ]
            },
            {
                name: 'Dia 2 (Dom 23) - Borderless + Tower',
                color: '#9b59b6',
                summary: 'TeamLab Borderless, Tokyo Tower, Zojoji',
                stops: [
                    { name: 'TeamLab Borderless (Azabudai Hills)', lat: 35.6641, lng: 139.7414, note: 'Museo digital' },
                    { name: 'Tokyo Tower', lat: 35.6586, lng: 139.7454, note: 'Mirador iconico' },
                    { name: 'Templo Zojoji', lat: 35.6585, lng: 139.7484, note: 'Templo historico' }
                ]
            },
            {
                name: 'Dia 3 (Lun 24) - Noreste',
                color: '#3498db',
                summary: 'Asakusa, Ueno, Akihabara',
                stops: [
                    { name: 'Senso-ji (Asakusa)', lat: 35.7148, lng: 139.7967, note: 'Templo y Nakamise' },
                    { name: 'Parque Ueno', lat: 35.7148, lng: 139.7731, note: 'Museos y estanque' },
                    { name: 'Akihabara', lat: 35.6984, lng: 139.773, note: 'Tiendas y arcades' }
                ]
            },
            {
                name: 'Dia 4 (Mar 25) - Shibuya / Harajuku',
                color: '#e67e22',
                summary: 'Meiji, Harajuku, Omotesando, Shibuya',
                stops: [
                    { name: 'Santuario Meiji', lat: 35.6764, lng: 139.6993, note: 'Bosque urbano' },
                    { name: 'Harajuku', lat: 35.6702, lng: 139.702, note: 'Takeshita St.' },
                    { name: 'Omotesando', lat: 35.6648, lng: 139.7126, note: 'Arquitectura y cafes' },
                    { name: 'Shibuya Crossing', lat: 35.6595, lng: 139.7005, note: 'Cruce iconico' }
                ]
            },
            {
                name: 'Dia 5 (Mie 26) - Museos + Base',
                color: '#16a085',
                summary: 'Palacio, NACT, 21_21, Hie, Hikawa',
                stops: [
                    { name: 'Jardines Palacio Imperial', lat: 35.6852, lng: 139.7528, note: 'Campos verdes' },
                    { name: 'National Art Center Tokyo', lat: 35.6655, lng: 139.7264, note: 'Museo y arquitectura' },
                    { name: '21_21 Design Sight', lat: 35.6668, lng: 139.7276, note: 'Diseno y exhibiciones' },
                    { name: 'Santuario Hie', lat: 35.672, lng: 139.7382, note: 'Torii rojos' },
                    { name: 'Santuario Hikawa (Akasaka)', lat: 35.6726, lng: 139.7372, note: 'Spot tranquilo' }
                ]
            },
            {
                name: 'Dia 6 (Jue 27) - Norte literario',
                color: '#8e44ad',
                summary: 'Koishikawa, Kagurazaka, Jinbocho',
                stops: [
                    { name: 'Koishikawa Korakuen', lat: 35.7077, lng: 139.7519, note: 'Jardin clasico' },
                    { name: 'Kagurazaka', lat: 35.7022, lng: 139.7375, note: 'Calles con escalones' },
                    { name: 'Jinbocho', lat: 35.6959, lng: 139.7573, note: 'Librerias y cafes' }
                ]
            },
            {
                name: 'Dia 7 (Vie 28) - Shinjuku',
                color: '#f39c12',
                summary: 'Shinjuku Gyoen, ciudad, Golden Gai',
                stops: [
                    { name: 'Shinjuku Gyoen', lat: 35.6852, lng: 139.71, note: 'Parque mixto' },
                    { name: 'Shinjuku (Omoide Yokocho)', lat: 35.6938, lng: 139.7036, note: 'Callejones y ramen' },
                    { name: 'Golden Gai', lat: 35.693, lng: 139.7064, note: 'Bares tiny' }
                ]
            },
            {
                name: 'Dia 8 (Sab 1) - Sur trendy',
                color: '#27ae60',
                summary: 'Institute, Ebisu, Daikanyama, Nakameguro',
                stops: [
                    { name: 'Teien Art Museum (Institute)', lat: 35.6362, lng: 139.7144, note: 'Arte y jardines' },
                    { name: 'Ebisu', lat: 35.6471, lng: 139.7101, note: 'Yebisu Garden Place' },
                    { name: 'Daikanyama', lat: 35.6482, lng: 139.7024, note: 'T-Site y cafes' },
                    { name: 'Nakameguro', lat: 35.6487, lng: 139.6993, note: 'Canal y boutiques' }
                ]
            }
        ];

        const hotel = {
            name: 'Hotel base: Via Inn Prime Akasaka',
            lat: 35.6729,
            lng: 139.7357,
            note: '6 lineas de metro en 10 min | Ubicacion estrategica'
        };

        const map = L.map('map', {
            scrollWheelZoom: true,
            worldCopyJump: true
        });

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap'
        }).addTo(map);

        const bounds = [];

        const legendGrid = document.getElementById('legend-grid');
        const optimizationGrid = document.getElementById('optimization-grid');
        const hotelBadge = document.getElementById('hotel-badge');

        days.forEach((day, index) => {
            const latlngs = day.stops.map((s) => [s.lat, s.lng]);
            if (latlngs.length > 1) {
                L.polyline(latlngs, {
                    color: day.color,
                    weight: 3,
                    opacity: 0.55,
                    dashArray: '6 4'
                }).addTo(map);
            }

            day.stops.forEach((stop) => {
                const marker = L.circleMarker([stop.lat, stop.lng], {
                    radius: 9,
                    color: '#fff',
                    weight: 2,
                    fillColor: day.color,
                    fillOpacity: 0.95
                });

                marker.bindPopup(`
                    <strong>${stop.name}</strong><br>
                    ${day.name}<br>
                    ${stop.note || ''}<br>
                    <a href="https://www.google.com/maps/search/?api=1&query=${stop.lat},${stop.lng}" target="_blank" rel="noopener">Abrir en Google Maps</a>
                `);
                marker.addTo(map);
                bounds.push([stop.lat, stop.lng]);
            });

            const item = document.createElement('div');
            item.className = 'legend-item';
            item.style.borderColor = day.color;
            item.style.setProperty('--delay', `${index * 70}ms`);
            item.innerHTML = `
                <div class="legend-icon" style="background:${day.color};"></div>
                <div class="legend-text">
                    <strong>${day.name}</strong>
                    <small>${day.summary}</small>
                </div>
            `;
            legendGrid.appendChild(item);

            const opt = document.createElement('div');
            opt.className = 'opt-item';
            opt.style.setProperty('--delay', `${index * 70}ms`);
            opt.innerHTML = `<strong>${day.name}</strong>${day.summary}`;
            optimizationGrid.appendChild(opt);
        });

        L.marker([hotel.lat, hotel.lng], {
            icon: L.divIcon({
                className: 'hotel-icon',
                html: '<div class="hotel-pin">&#9733;</div>',
                iconSize: [26, 26],
                iconAnchor: [13, 26],
                popupAnchor: [0, -20]
            })
        }).addTo(map)
          .bindPopup(`<strong>${hotel.name}</strong><br>${hotel.note}<br><a href="https://www.google.com/maps/search/?api=1&query=${hotel.lat},${hotel.lng}" target="_blank" rel="noopener">Abrir en Google Maps</a>`);

        hotelBadge.textContent = `${hotel.name} - ${hotel.note}`;

        if (bounds.length) {
            map.fitBounds(bounds, { padding: [32, 32] });
        } else {
            map.setView([35.6762, 139.6503], 12);
        }
    </script>
    <script>
        const activePath = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
        document.querySelectorAll('.top-nav a').forEach((link) => {
            const target = link.getAttribute('href').toLowerCase();
            if (target === activePath) {
                link.classList.add('is-active');
            }
        });
    </script>
</body>
</html>


